<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>i18n Demo - AWS IAM Policy Generator</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .demo-container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .back-link {
      display: inline-block;
      margin-bottom: 1rem;
      color: white;
      text-decoration: none;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      backdrop-filter: blur(10px);
    }
    
    .back-link:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .demo-header {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .language-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: center;
    }
    
    .language-btn {
      padding: 0.75rem 1.5rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border-radius: 8px;
      cursor: pointer;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .language-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .language-btn.active {
      background: white;
      color: #667eea;
      border-color: white;
    }
    
    .demo-content {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .policy-generator {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 2rem;
    }
    
    @media (max-width: 768px) {
      .policy-generator {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      
      .language-controls {
        flex-wrap: wrap;
      }
    }
    
    .section {
      padding: 1.5rem;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e9ecef;
    }
    
    .section h3 {
      margin: 0 0 1rem 0;
      color: #2c3e50;
      font-size: 1.1rem;
    }
    
    .resource-list,
    .action-list {
      list-style: none;
      padding: 0;
    }
    
    .resource-item,
    .action-item {
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      background: white;
      border-radius: 6px;
      border: 1px solid #dee2e6;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .resource-item:hover,
    .action-item:hover {
      border-color: #667eea;
      box-shadow: 0 2px 4px rgba(102, 126, 234, 0.1);
    }
    
    .resource-item.selected,
    .action-item.selected {
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      border-color: #667eea;
    }
    
    .checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #dee2e6;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .checkbox.checked {
      background: #667eea;
      border-color: #667eea;
    }
    
    .checkbox.checked::after {
      content: '‚úì';
      color: white;
      font-size: 12px;
    }
    
    .arn-input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    
    .policy-output {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 1rem;
      border-radius: 6px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.85rem;
      max-height: 400px;
      overflow: auto;
    }
    
    .dependency-notice {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 6px;
      padding: 0.75rem;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }
    
    .dependency-notice strong {
      color: #856404;
    }
    
    .dependency-list {
      list-style: none;
      padding-left: 1rem;
      margin-top: 0.5rem;
    }
    
    .dependency-list li:before {
      content: '‚Üí ';
      font-weight: bold;
      color: #856404;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <a href="index.html" class="back-link">‚Üê Back to Examples</a>
    
    <div class="demo-header">
      <h1>üåç Multi-language Demo</h1>
      <p>
        This demo shows how the AWS IAM Policy Generator supports multiple languages.
        Switch between languages to see the UI update in real-time. The dependency resolution
        feature works consistently across all languages.
      </p>
      
      <div class="language-controls">
        <button class="language-btn active" data-lang="en">üá∫üá∏ English</button>
        <button class="language-btn" data-lang="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</button>
        <button class="language-btn" data-lang="ja">üáØüáµ Êó•Êú¨Ë™û</button>
        <button class="language-btn" data-lang="zh">üá®üá≥ ‰∏≠Êñá</button>
      </div>
    </div>
    
    <div class="demo-content">
      <div id="root"></div>
    </div>
  </div>

  <script type="text/babel">
    const translations = {
      en: {
        selectResource: 'Select Resource',
        configureActions: 'Configure Actions',
        generatedPolicy: 'Generated Policy',
        enterArn: 'Enter ARN...',
        dependencyNotice: 'Dependencies automatically resolved',
        resources: {
          's3': 'S3 Bucket',
          'ec2': 'EC2 Instance', 
          'lambda': 'Lambda Function',
          'dynamodb': 'DynamoDB Table'
        },
        actions: {
          's3:ListBucket': 'List Bucket',
          's3:GetBucketLocation': 'Get Bucket Location',
          's3:GetObject': 'Get Object',
          's3:PutObject': 'Put Object',
          's3:DeleteObject': 'Delete Object',
          'ec2:DescribeInstances': 'Describe Instances',
          'ec2:StartInstances': 'Start Instances',
          'ec2:StopInstances': 'Stop Instances',
          'ec2:TerminateInstances': 'Terminate Instances',
          'lambda:GetFunction': 'Get Function',
          'lambda:InvokeFunction': 'Invoke Function',
          'lambda:UpdateFunctionCode': 'Update Function Code',
          'lambda:DeleteFunction': 'Delete Function',
          'dynamodb:DescribeTable': 'Describe Table',
          'dynamodb:GetItem': 'Get Item',
          'dynamodb:PutItem': 'Put Item',
          'dynamodb:Query': 'Query',
          'dynamodb:Scan': 'Scan'
        }
      },
      ko: {
        selectResource: 'Î¶¨ÏÜåÏä§ ÏÑ†ÌÉù',
        configureActions: 'Ïï°ÏÖò Íµ¨ÏÑ±',
        generatedPolicy: 'ÏÉùÏÑ±Îêú Ï†ïÏ±Ö',
        enterArn: 'ARN ÏûÖÎ†•...',
        dependencyNotice: 'ÏùòÏ°¥ÏÑ±Ïù¥ ÏûêÎèôÏúºÎ°ú Ìï¥Í≤∞Îê®',
        resources: {
          's3': 'S3 Î≤ÑÌÇ∑',
          'ec2': 'EC2 Ïù∏Ïä§ÌÑ¥Ïä§',
          'lambda': 'Lambda Ìï®Ïàò',
          'dynamodb': 'DynamoDB ÌÖåÏù¥Î∏î'
        },
        actions: {
          's3:ListBucket': 'Î≤ÑÌÇ∑ Î™©Î°ù',
          's3:GetBucketLocation': 'Î≤ÑÌÇ∑ ÏúÑÏπò Ï°∞Ìöå',
          's3:GetObject': 'Í∞ùÏ≤¥ Í∞ÄÏ†∏Ïò§Í∏∞',
          's3:PutObject': 'Í∞ùÏ≤¥ ÏóÖÎ°úÎìú',
          's3:DeleteObject': 'Í∞ùÏ≤¥ ÏÇ≠Ï†ú',
          'ec2:DescribeInstances': 'Ïù∏Ïä§ÌÑ¥Ïä§ Ï°∞Ìöå',
          'ec2:StartInstances': 'Ïù∏Ïä§ÌÑ¥Ïä§ ÏãúÏûë',
          'ec2:StopInstances': 'Ïù∏Ïä§ÌÑ¥Ïä§ Ï§ëÏßÄ',
          'ec2:TerminateInstances': 'Ïù∏Ïä§ÌÑ¥Ïä§ Ï¢ÖÎ£å',
          'lambda:GetFunction': 'Ìï®Ïàò Ï°∞Ìöå',
          'lambda:InvokeFunction': 'Ìï®Ïàò Ïã§Ìñâ',
          'lambda:UpdateFunctionCode': 'Ìï®Ïàò ÏΩîÎìú ÏóÖÎç∞Ïù¥Ìä∏',
          'lambda:DeleteFunction': 'Ìï®Ïàò ÏÇ≠Ï†ú',
          'dynamodb:DescribeTable': 'ÌÖåÏù¥Î∏î Ï°∞Ìöå',
          'dynamodb:GetItem': 'Ìï≠Î™© Ï°∞Ìöå',
          'dynamodb:PutItem': 'Ìï≠Î™© Ï∂îÍ∞Ä',
          'dynamodb:Query': 'ÏøºÎ¶¨',
          'dynamodb:Scan': 'Ïä§Ï∫î'
        }
      },
      ja: {
        selectResource: '„É™„ÇΩ„Éº„ÇπÈÅ∏Êäû',
        configureActions: '„Ç¢„ÇØ„Ç∑„Éß„É≥Ë®≠ÂÆö',
        generatedPolicy: 'ÁîüÊàê„Åï„Çå„Åü„Éù„É™„Ç∑„Éº',
        enterArn: 'ARN „ÇíÂÖ•Âäõ...',
        dependencyNotice: '‰æùÂ≠òÈñ¢‰øÇ„ÇíËá™ÂãïËß£Ê±∫',
        resources: {
          's3': 'S3 „Éê„Ç±„ÉÉ„Éà',
          'ec2': 'EC2 „Ç§„É≥„Çπ„Çø„É≥„Çπ',
          'lambda': 'Lambda Èñ¢Êï∞',
          'dynamodb': 'DynamoDB „ÉÜ„Éº„Éñ„É´'
        },
        actions: {
          's3:ListBucket': '„Éê„Ç±„ÉÉ„Éà‰∏ÄË¶ß',
          's3:GetBucketLocation': '„Éê„Ç±„ÉÉ„ÉàÂ†¥ÊâÄÂèñÂæó',
          's3:GetObject': '„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂèñÂæó',
          's3:PutObject': '„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÈÖçÁΩÆ',
          's3:DeleteObject': '„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂâäÈô§',
          'ec2:DescribeInstances': '„Ç§„É≥„Çπ„Çø„É≥„ÇπË®òËø∞',
          'ec2:StartInstances': '„Ç§„É≥„Çπ„Çø„É≥„ÇπÈñãÂßã',
          'ec2:StopInstances': '„Ç§„É≥„Çπ„Çø„É≥„ÇπÂÅúÊ≠¢',
          'ec2:TerminateInstances': '„Ç§„É≥„Çπ„Çø„É≥„ÇπÁµÇ‰∫Ü',
          'lambda:GetFunction': 'Èñ¢Êï∞ÂèñÂæó',
          'lambda:InvokeFunction': 'Èñ¢Êï∞ÂÆüË°å',
          'lambda:UpdateFunctionCode': 'Èñ¢Êï∞„Ç≥„Éº„ÉâÊõ¥Êñ∞',
          'lambda:DeleteFunction': 'Èñ¢Êï∞ÂâäÈô§',
          'dynamodb:DescribeTable': '„ÉÜ„Éº„Éñ„É´Ë®òËø∞',
          'dynamodb:GetItem': '„Ç¢„Ç§„ÉÜ„É†ÂèñÂæó',
          'dynamodb:PutItem': '„Ç¢„Ç§„ÉÜ„É†ÈÖçÁΩÆ',
          'dynamodb:Query': '„ÇØ„Ç®„É™',
          'dynamodb:Scan': '„Çπ„Ç≠„É£„É≥'
        }
      },
      zh: {
        selectResource: 'ÈÄâÊã©ËµÑÊ∫ê',
        configureActions: 'ÈÖçÁΩÆÊìç‰Ωú',
        generatedPolicy: 'ÁîüÊàêÁöÑÁ≠ñÁï•',
        enterArn: 'ËæìÂÖ•ARN...',
        dependencyNotice: 'Ëá™Âä®Ëß£Êûê‰æùËµñÂÖ≥Á≥ª',
        resources: {
          's3': 'S3 Â≠òÂÇ®Ê°∂',
          'ec2': 'EC2 ÂÆû‰æã',
          'lambda': 'Lambda ÂáΩÊï∞',
          'dynamodb': 'DynamoDB Ë°®'
        },
        actions: {
          's3:ListBucket': 'ÂàóÂá∫Â≠òÂÇ®Ê°∂',
          's3:GetBucketLocation': 'Ëé∑ÂèñÂ≠òÂÇ®Ê°∂‰ΩçÁΩÆ',
          's3:GetObject': 'Ëé∑ÂèñÂØπË±°',
          's3:PutObject': '‰∏ä‰º†ÂØπË±°',
          's3:DeleteObject': 'Âà†Èô§ÂØπË±°',
          'ec2:DescribeInstances': 'ÊèèËø∞ÂÆû‰æã',
          'ec2:StartInstances': 'ÂêØÂä®ÂÆû‰æã',
          'ec2:StopInstances': 'ÂÅúÊ≠¢ÂÆû‰æã',
          'ec2:TerminateInstances': 'ÁªàÊ≠¢ÂÆû‰æã',
          'lambda:GetFunction': 'Ëé∑ÂèñÂáΩÊï∞',
          'lambda:InvokeFunction': 'Ë∞ÉÁî®ÂáΩÊï∞',
          'lambda:UpdateFunctionCode': 'Êõ¥Êñ∞ÂáΩÊï∞‰ª£Á†Å',
          'lambda:DeleteFunction': 'Âà†Èô§ÂáΩÊï∞',
          'dynamodb:DescribeTable': 'ÊèèËø∞Ë°®',
          'dynamodb:GetItem': 'Ëé∑ÂèñÈ°πÁõÆ',
          'dynamodb:PutItem': 'ÊîæÁΩÆÈ°πÁõÆ',
          'dynamodb:Query': 'Êü•ËØ¢',
          'dynamodb:Scan': 'Êâ´Êèè'
        }
      }
    };

    function I18nPolicyGenerator() {
      const [currentLang, setCurrentLang] = React.useState('en');
      const [selectedResource, setSelectedResource] = React.useState('');
      const [selectedActions, setSelectedActions] = React.useState([]);
      const [arn, setArn] = React.useState('');
      
      const t = translations[currentLang];
      
      const resources = [
        { id: 's3', service: 's3' },
        { id: 'ec2', service: 'ec2' },
        { id: 'lambda', service: 'lambda' },
        { id: 'dynamodb', service: 'dynamodb' }
      ];
      
      const actions = {
        s3: ['s3:ListBucket', 's3:GetBucketLocation', 's3:GetObject', 's3:PutObject', 's3:DeleteObject'],
        ec2: ['ec2:DescribeInstances', 'ec2:StartInstances', 'ec2:StopInstances', 'ec2:TerminateInstances'],
        lambda: ['lambda:GetFunction', 'lambda:InvokeFunction', 'lambda:UpdateFunctionCode', 'lambda:DeleteFunction'],
        dynamodb: ['dynamodb:DescribeTable', 'dynamodb:GetItem', 'dynamodb:PutItem', 'dynamodb:Query', 'dynamodb:Scan']
      };
      
      // Dependency resolution
      const resolveDependencies = (actions) => {
        const deps = {
          's3:GetObject': ['s3:ListBucket', 's3:GetBucketLocation'],
          's3:PutObject': ['s3:ListBucket'],
          's3:DeleteObject': ['s3:ListBucket'],
          'ec2:TerminateInstances': ['ec2:DescribeInstances'],
          'ec2:StopInstances': ['ec2:DescribeInstances'],
          'ec2:StartInstances': ['ec2:DescribeInstances'],
          'lambda:InvokeFunction': ['lambda:GetFunction'],
          'lambda:UpdateFunctionCode': ['lambda:GetFunction'],
          'lambda:DeleteFunction': ['lambda:GetFunction'],
          'dynamodb:GetItem': ['dynamodb:DescribeTable'],
          'dynamodb:PutItem': ['dynamodb:DescribeTable'],
          'dynamodb:Query': ['dynamodb:DescribeTable'],
          'dynamodb:Scan': ['dynamodb:DescribeTable']
        };

        const resolved = new Set(actions);
        actions.forEach(action => {
          if (deps[action]) {
            deps[action].forEach(dep => resolved.add(dep));
          }
        });
        return Array.from(resolved).sort();
      };
      
      const resolvedActions = resolveDependencies(selectedActions);
      const hasAutoResolvedDeps = resolvedActions.length > selectedActions.length;
      
      const policy = resolvedActions.length > 0 && arn ? {
        Version: '2012-10-17',
        Statement: [{
          Effect: 'Allow',
          Action: resolvedActions,
          Resource: arn
        }]
      } : { Version: '2012-10-17', Statement: [] };
      
      React.useEffect(() => {
        // Language button handlers
        document.querySelectorAll('.language-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            document.querySelectorAll('.language-btn').forEach(b => b.classList.remove('active'));
            e.currentTarget.classList.add('active');
            setCurrentLang(e.currentTarget.dataset.lang);
          });
        });
      }, []);
      
      return (
        <div className="policy-generator">
          {/* Resources Section */}
          <div className="section">
            <h3>üéØ {t.selectResource}</h3>
            <ul className="resource-list">
              {resources.map(resource => (
                <li
                  key={resource.id}
                  className={`resource-item ${selectedResource === resource.id ? 'selected' : ''}`}
                  onClick={() => {
                    setSelectedResource(resource.id);
                    setSelectedActions([]);
                  }}
                >
                  <div className={`checkbox ${selectedResource === resource.id ? 'checked' : ''}`}></div>
                  <span>{t.resources[resource.id]}</span>
                </li>
              ))}
            </ul>
          </div>
          
          {/* Actions Section */}
          <div className="section">
            <h3>‚ö° {t.configureActions}</h3>
            <input
              type="text"
              className="arn-input"
              placeholder={t.enterArn}
              value={arn}
              onChange={(e) => setArn(e.target.value)}
            />
            
            {hasAutoResolvedDeps && (
              <div className="dependency-notice">
                <strong>{t.dependencyNotice}</strong>
                <ul className="dependency-list">
                  {resolvedActions.filter(action => !selectedActions.includes(action)).map(dep => (
                    <li key={dep}>{t.actions[dep] || dep}</li>
                  ))}
                </ul>
              </div>
            )}
            
            <ul className="action-list">
              {selectedResource && actions[selectedResource]?.map(action => (
                <li
                  key={action}
                  className={`action-item ${selectedActions.includes(action) ? 'selected' : ''}`}
                  onClick={() => {
                    if (selectedActions.includes(action)) {
                      setSelectedActions(selectedActions.filter(a => a !== action));
                    } else {
                      setSelectedActions([...selectedActions, action]);
                    }
                  }}
                >
                  <div className={`checkbox ${selectedActions.includes(action) ? 'checked' : ''}`}></div>
                  <span>{t.actions[action] || action}</span>
                </li>
              ))}
            </ul>
          </div>
          
          {/* Policy Section */}
          <div className="section">
            <h3>üìã {t.generatedPolicy}</h3>
            <div className="policy-output">
              <pre style={{ margin: 0 }}>{JSON.stringify(policy, null, 2)}</pre>
            </div>
          </div>
        </div>
      );
    }
    
    ReactDOM.render(<I18nPolicyGenerator />, document.getElementById('root'));
  </script>
</body>
</html>